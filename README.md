# üöÄ –®–∞–±–ª–æ–Ω –±–æ—Ç–∞ –Ω–∞ Aiogram 3

–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —à–∞–±–ª–æ–Ω–∞ –±–æ—Ç–∞ –Ω–∞ **Aiogram 3**! üìå –≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞ –ø—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ Telegram-–±–æ—Ç–æ–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º **–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞ Aiogram**.

## –Ø–∑—ã–∫–∏ –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
![Python](https://img.shields.io/badge/-Python-4B0082?style=for-the-badge&logo=python&logoColor=FFD700)
![Aiogram](https://img.shields.io/badge/-aiogram-4B0082?style=for-the-badge&logo=aiogram&logoColor=7CFC00)


## üå≥ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

–ü—Ä–æ–µ–∫—Ç —Ä–∞–∑–¥–µ–ª–µ–Ω –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–∞–ø–æ–∫ –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –∏ –ª—É—á—à–µ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –∫–æ–¥–∞.

### üìÅ database ‚Äî –±–∞–∑–∞ –¥—ã–Ω–Ω—ã—Ö

–í —ç—Ç–æ–π –ø–∞–ø–∫–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤—Å—è —Ä–∞–±–æ—Ç–∞ —Å –±–æ–∑–æ–π –¥–∞–Ω–Ω—ã—Ö.
–û–Ω–∞ —É–º–µ–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å 3 –≤–∏–¥–∞–º–∏ –ë–î:
- ``mysql``
- ``sqlite``
- ``postgresql``

–ß—Ç–æ –±—ã –≤—ã–±—Ä–∞—Ç—å –Ω—É–∂–Ω—É—é –ë–î, –Ω—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å `.env` —Ñ–∞–π–ª. [–ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ–± —ç—Ç–æ–º –Ω–∏–∂–µ](#-–Ω–∞—Å—Ç—Ä–æ–π–∫–∏).

### üìÅ handler ‚Äî –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥

–ó–¥–µ—Å—å –Ω–∞—Ö–æ–¥—è—Ç—Å—è –æ—Å–Ω–æ–≤–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥, –∫–æ—Ç–æ—Ä—ã–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç –≤—Ö–æ–¥—è—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

- `__init__.py` ‚Äî —Ñ–∞–π–ª –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞ –∏ –∑–∞–ø—É—Å–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤.
- `start.py` ‚Äî —Å–æ–¥–µ—Ä–∂–∏—Ç –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã `/start`, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –±–æ—Ç–æ–º.

### üìÅ logs ‚Äî –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π

–õ–æ–≥–∏ –±–æ—Ç–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è —Å –ø–æ–º–æ—â—å—é –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ **cololog**. –û–Ω–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–¥–æ–±–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –æ—à–∏–±–∫–∏ –∏ —Å–æ–±—ã—Ç–∏—è.

–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏:

```bash
pip install cololog
```

### üìÅ setting ‚Äî –æ—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞

–í —ç—Ç–æ–π –ø–∞–ø–∫–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –∏ –≤–∞–∂–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:

- `__init__.py` ‚Äî –∏–º–ø–æ—Ä—Ç –≤—Å–µ—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ –±–æ—Ç–∞, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —Ñ—É–Ω–∫—Ü–∏–π –æ—á–∏—Å—Ç–∫–∏ –∫–æ–Ω—Å–æ–ª–∏.
- `bot.py` ‚Äî —Å–æ–¥–µ—Ä–∂–∏—Ç –æ—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, –∞ —Ç–∞–∫–∂–µ —Å–æ–∑–¥–∞–µ—Ç —ç–∫–∑–µ–º–ø–ª—è—Ä—ã **bot** –∏ **dp (dispatcher)** –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π.
- `config.py` ‚Äî –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –∑–∞–≥—Ä—É–∑–∫—É –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏–∑ `.env` —Ñ–∞–π–ª–∞. [–ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ–± —ç—Ç–æ–º –Ω–∏–∂–µ](#-–Ω–∞—Å—Ç—Ä–æ–π–∫–∏).
- `logger.py` ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è, –≤–∫–ª—é—á–∞—è —É–∫–∞–∑–∞–Ω–∏–µ –ø—É—Ç–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ª–æ–≥–æ–≤ –∏ —Ñ—É–Ω–∫—Ü–∏—é –æ—á–∏—Å—Ç–∫–∏ –∫–æ–Ω—Å–æ–ª–∏ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö –û–°.

### üìÅ utils ‚Äî –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã

–ü–∞–ø–∫–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –º–æ–¥—É–ª–∏ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞:

- `optimization_data.py` ‚Äî –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–§–ò–û) –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—é JSON-–ø—Ä–æ—Ñ–∏–ª—è.

–ü—Ä–∏–º–µ—Ä –≤—ã—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö:

```json
{
    "user_id": 12345678,
    "first_name": "–∏–º—è<",
    "last_name": "—Ñ–∞–º–∏–ª–∏—è",
    "full_name": "–ò–º—è –§–∞–º–∏–ª–∏—è",
    "is_admin": false
}
```

–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —ç—Ç–æ ``message`` –∏–∑ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞.

‚úÖ –§—É–Ω–∫—Ü–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è–µ—Ç –Ω–µ–∂–µ–ª–∞—Ç–µ–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, `<`), –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –≤—ã–∑—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏ –ø—Ä–∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ HTML.

### üìù –§–∞–π–ª `app.py` ‚Äî –≥–ª–∞–≤–Ω—ã–π –∑–∞–ø—É—Å–∫–Ω–æ–π —Ñ–∞–π–ª

–≠—Ç–æ—Ç —Ñ–∞–π–ª –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞:

```bash
python app.py
```

–ü—Ä–∏ —Å—Ç–∞—Ä—Ç–µ:

1. –ó–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –≤—Å–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏.
2. –ë–æ—Ç –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ API Telegram.
3. –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã, —É–∫–∞–∑–∞–Ω–Ω—ã–µ –≤ `.env`, –ø–æ–ª—É—á–∞—é—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –∑–∞–ø—É—Å–∫–µ –±–æ—Ç–∞. üì©

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∏

–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –±–æ—Ç–∞ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ `.env` —Ñ–∞–π–ª–µ. –í –Ω–µ–º –º–æ–∂–Ω–æ –∑–∞–¥–∞—Ç—å **—Ç–æ–∫–µ–Ω API**, **–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤** –∏ –¥—Ä—É–≥–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã.

–ü—Ä–∏–º–µ—Ä `.env` —Ñ–∞–π–ª–∞:

```env
# –¢–æ–∫–µ–Ω –±–æ—Ç–∞ Telegram
TELEGRAM_KEY=–í–ê–®_–¢–û–ö–ï–ù

# –°–ø–∏—Å–æ–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ (—Ä–∞–∑–¥–µ–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—è—Ç–æ–π)
TELEGRAM_ADMIN=USER1,USER2,USER3
```

–ö–æ–Ω—Ñ–∏–≥ –≤–º–µ—Å—Ç–µ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö –±—É–¥–µ—Ç –Ω–µ–º–Ω–æ–≥–æ –æ—Ç–ª–µ—á–∞—Ç—å—Å—è.

**–î–ª—è PostgreSQL**:

```env
# ----------------------------------- –°–∏—Å—Ç–µ–º–Ω—ã–µ

# –í—ã–±–æ—Ä —Ç–∏–ø–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
# 'sqlite', 'mysql', 'postgresql'
DATABASE_TYPE = "postgresql"


# ----------------------------------- –ë–æ—Ç —Ç–µ–ª–µ–≥—Ä–∞–º–º

# –¢–æ–∫–µ–Ω –±–æ—Ç–∞ Telegram
TELEGRAM_KEY=–í–ê–®_–¢–û–ö–ï–ù

# –°–ø–∏—Å–æ–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ (—Ä–∞–∑–¥–µ–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—è—Ç–æ–π)
TELEGRAM_ADMIN=USER1,USER2,USER3

# ----------------------------------- postgreSQL

# IP –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
IP_ADDRESS=–∞–¥—Ä–µ—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

# –ù–∞–∑–≤–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
DATABASE_NAME=–Ω–∞–∑–≤–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

# –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å –ø—Ä–∞–≤–∞–º–∏ —á—Ç–µ–Ω–∏—è –∏ –∑–∞–ø–∏—Å–∏ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
USERNAME=–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å

# –ü–∞—Ä–æ–ª—å –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
PASSWORD=–ø–∞—Ä–æ–ª—å


# ----------------------------------- SQLite

# –ù–∞–∑–≤–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
DATABASE_NAME=–Ω–∞–∑–≤–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö


# ----------------------------------- MySQL

# IP –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
IP_ADDRESS=–∞–¥—Ä–µ—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

# –ù–∞–∑–≤–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
DATABASE_NAME=–Ω–∞–∑–≤–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

# –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å –ø—Ä–∞–≤–∞–º–∏ —á—Ç–µ–Ω–∏—è –∏ –∑–∞–ø–∏—Å–∏ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
USERNAME=–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å

# –ü–∞—Ä–æ–ª—å –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
PASSWORD=–ø–∞—Ä–æ–ª—å
```

``–ù–µ –Ω—É–∂–Ω—ã–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (–∏—Ö –Ω–∞—Å—Ç—Ä–æ–π–∫–∏) –º–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å.``

## ‚ñ∂Ô∏è –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

–î–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

1Ô∏è‚É£ **–°–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π):

```bash
python -m venv .venv
```

2Ô∏è‚É£ **–ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ**:

- –î–ª—è Linux/macOS:
  ```bash
  source .venv/bin/activate
  ```
- –î–ª—è Windows:
  ```bash
  source .venv/Scripts/activate
  ```

3Ô∏è‚É£ **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**:

```bash
pip install -r requirements.txt
```

4Ô∏è‚É£ **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞**:

```bash
python app.py
```

## üéØ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —è–≤–ª—è–µ—Ç—Å—è **–ø—Ä–æ—Å—Ç—ã–º –∏ —É–¥–æ–±–Ω—ã–º —à–∞–±–ª–æ–Ω–æ–º** –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –±–æ—Ç–æ–≤ –Ω–∞ **Aiogram 3**. –û–Ω –ø–æ–º–æ–∂–µ—Ç –≤–∞–º:

‚úÖ –û—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å –∫–æ–¥ –≤ —É–¥–æ–±–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ;
‚úÖ –†–∞–±–æ—Ç–∞—Ç—å —Å –ª–æ–≥–∞–º–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –æ—à–∏–±–æ–∫;
‚úÖ –ì–∏–±–∫–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –±–æ—Ç–∞ —á–µ—Ä–µ–∑ `.env` —Ñ–∞–π–ª;
‚úÖ –ë—ã—Å—Ç—Ä–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–≤–æ–µ–≥–æ Telegram-–±–æ—Ç–∞.

üí° –ù–∞–¥–µ—é—Å—å, —ç—Ç–æ—Ç —à–∞–±–ª–æ–Ω –æ–∫–∞–∂–µ—Ç—Å—è **–ø–æ–ª–µ–∑–Ω—ã–º** –∏ —Å—ç–∫–æ–Ω–æ–º–∏—Ç –≤–∞—à–µ –≤—Ä–µ–º—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ –±–æ—Ç–∞! üöÄ

### –°–≤—è–∑—å —Å–æ –º–Ω–æ–π
[![Telegram](https://img.shields.io/badge/-Telegram-4B0082?style=for-the-badge&logo=telegram)](https://t.me/danilka_pikaso)
